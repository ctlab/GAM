<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="shared/jquery.js" type="text/javascript"></script>
    <script src="shared/shiny.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="shared/shiny.css"/>
    <link rel="stylesheet" type="text/css" href="shared/slider/css/jquery.slider.min.css"/>
    <script src="shared/slider/js/jquery.slider.min.js"></script>
    <link rel="stylesheet" type="text/css" href="shared/bootstrap/css/bootstrap.min.css"/>
    <script src="shared/bootstrap/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="d3.v3.js" type="text/javascript"></script>
    <script src="plot.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="plot.css"/>
    <link rel="stylesheet" type="text/css" href="shared/bootstrap/css/bootstrap-responsive.min.css"/>
    <title>Shiny GAM</title>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12" style="padding: 10px 0px;">
          <h1>Shiny GAM</h1>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span4">
          <form class="well">
            <label class="control-label" for="network">Select a network:</label>
            <select id="network">
              <option value="Mouse musculus" selected="selected">Mouse musculus</option>
              <option value="Homo sapiens">Homo sapiens</option>
            </select>
            <label>Select a TSV-file with gene p-values</label>
            <input id="geneDE" type="file"/>
            <div id="geneDEProgress" class="progress progress-striped active shiny-file-input-progress">
              <div class="bar"></div>
              <label></label>
            </div>
            <label>Select a TSV-file with metabolite p-values</label>
            <input id="metDE" type="file"/>
            <div id="metDEProgress" class="progress progress-striped active shiny-file-input-progress">
              <div class="bar"></div>
              <label></label>
            </div>
            <label class="control-label" for="reactionsAs">How to interpret reactions:</label>
            <select id="reactionsAs">
              <option value="nodes" selected="selected">As nodes</option>
              <option value="edges">As edges</option>
            </select>
            <div data-display-if="input.reactionsAs == 'nodes'">
              <label class="checkbox" for="collapseReactions">
                <input id="collapseReactions" type="checkbox" checked="checked"/>
                <span>Collapse reactions</span>
              </label>
            </div>
            <div data-display-if="input.reactionsAs != 'nodes'">
              <label class="checkbox" for="useRpairs">
                <input id="useRpairs" type="checkbox" checked="checked"/>
                <span>Use RPAIRs</span>
              </label>
            </div>
            <br/>
            <button id="preprocess" type="button" class="btn action-button">Preprocess</button>
            <label for="geneFDR">FDR for genes</label>
            <input id="geneFDR" type="number" value="1e-06" min="1e-100" max="1" step="1e-200"/>
            <label for="metFDR">FDR for metabolites</label>
            <input id="metFDR" type="number" value="1e-06" min="1e-100" max="1" step="1e-200"/>
            <label for="absentMetScore">Score for absent metabolites</label>
            <input id="absentMetScore" type="number" value="-20"/>
            <br/>
            <button id="find" type="button" class="btn action-button">Find module</button>
            <br/>
            <div data-display-if="input.reactionsAs != 'nodes' && input.useRpairs">
              <label class="checkbox" for="addTransPairs">
                <input id="addTransPairs" type="checkbox"/>
                <span>Add trans- edges</span>
              </label>
            </div>
            <div data-display-if="input.reactionsAs == 'nodes'">
              <label class="checkbox" for="addMetabolitesForReactions">
                <input id="addMetabolitesForReactions" type="checkbox"/>
                <span>Add all metabolites for reactions</span>
              </label>
              <label class="checkbox" for="addInterconnections">
                <input id="addInterconnections" type="checkbox"/>
                <span>Add interconnections</span>
              </label>
              <label class="checkbox" for="removeHangingNodes">
                <input id="removeHangingNodes" type="checkbox"/>
                <span>Remove hanging nodes</span>
              </label>
              <label class="checkbox" for="removeSimpleReactions">
                <input id="removeSimpleReactions" type="checkbox"/>
                <span>Remove simple reactions</span>
              </label>
            </div>
            <br/>
            <a id="downloadXGMML" class="btn shiny-download-link" href="" target="_blank">Download XGMML</a>
            <br/>
          </form>
        </div>
        <div class="span8">
          <div id="geneDETable" class="shiny-html-output"></div>
          <div id="geneIdsType" class="shiny-text-output"></div>
          <div id="metDETable" class="shiny-html-output"></div>
          <div id="metIdsType" class="shiny-text-output"></div>
          <div id="networkSummary" class="shiny-text-output"></div>
          <div id="moduleSummary" class="shiny-text-output"></div>
          <div id="module" class="graph-output"></div>
          <div id="graphContainer" class="graph-output"></div>
        </div>
      </div>
    </div>
  </body>
</html>
